{% extends 'layouts/basefile/base.html' %}
{% block content %}
{% load static %}



<!-- Start content -->
<div class="content">
    <div class="container-fluid">
        <div class="page-title-box">
            <div class="row align-items-center">
                <div class="col-sm-6">
                    <h4 class="page-title">List Management</h4>
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="javascript:void(0);"><i
                                    class="mdi mdi-home-outline"></i></a></li>
                        <li class="breadcrumb-item active">List Management</li>
                    </ol>
                </div>
                <!-- <div class="col-sm-6">
                    <button class="btn btn-primary waves-effect waves-light float-right" type="button"
                        data-toggle="modal" data-target=".bs-example-modal-center">
                        Create Task
                    </button>
                </div> -->
            </div> <!-- end row -->
        </div>
        <!-- end page-title -->

        <div class="row">

            <!--settings partial sidebar-->
            {% include 'partials/settings_sidebar.html' %}

            <div class="col-sm-9 col-md-9 col-lg-10">
                <!-- Nav tabs -->
                <ul class="nav nav-tabs" role="tablist">
                    <!-- Manage Lists tab link -->
                    <li class="nav-item">
                        <a class="nav-link active" href="{% url 'list_management' %}">
                            <i class="fas fa-th-list "></i> &nbsp;Manage Lists
                        </a>
                    </li>
                    <!-- Manage Tags tab link -->

                    <li class="nav-item tag">
                        <a class="nav-link " href="{% url 'tags_management' %}">
                            <i class="fas fa-tags "></i> &nbsp;Manage Tags
                        </a>
                    </li>

                </ul>
                <!-- Tab panes start -->
                <div class="tab-content">
                    <!-- Manage Lists tab start-->
                    <div class="tab-pane active" id="manage-list" role="tabpanel">
                        <div class="card">
                            <div class="card-body">
                                <div class="row align-items-center">
                                    <div id="list__field_btn" class="col-sm-12">
                                        <button
                                            class="btn btn-primary btn-sm waves-effect waves-light float-right mb-2"
                                            type="button" data-toggle="modal" data-target=".bs-example-modal-center-custom">
                                            <i class="mdi mdi-content-copy"></i> Custom Fields
                                        </button>
                                        <a href="{% url 'add_new_list' %}" class="btn btn-primary btn-sm waves-effect waves-light float-right mb-2 mr-2">
                                            <i class="mdi mdi-plus"></i> Add List
                                        </a>

                                    </div>
                                </div> <!-- end row -->
                                <div id="list_table">
                                    <table id="datatable-buttons" class="table table-hover dt-responsive nowrap"
                                    style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>Name</th>
                                                <th>List Pulled?</th>
                                                <th>Date</th>
                                                <th>Status</th>
                                                <th>+Sequence</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                           {% for lists in prospect_lists %}
                                                <tr>
                                                    <td>{{ lists.id }}</td>
                                                    <td><a href="{% url 'update_list' lists.id %}" class="btn btn-block btn-sm btn-primary btn_wrap_content">{{ lists.name }}</a></td>
                                                    <td>
                                                        {{ lists.pulled_status }}
                                                    </td>
                                                    <td>
                                                        {{ lists.pull_date }}
                                                    </td>
                                                    <td> <span class="badge badge-success font-12">{{ lists.list_status }}</span></td>
                                                    <td>
                                                        {% if lists.seq_id == "" %}
                                                            <a href="javascript:void(0);" onclick="create_sequence('{{lists.seq_id}}','{{lists.id}}')" class="badge badge-info font-14" >Create Sequence</a>
                                                        {% else %}
                                                            <a href="javascript:void(0);" onclick="create_sequence('{{lists.seq_id}}','{{lists.id}}')" class="badge badge-primary font-14" >View Sequence</a>
                                                        {% endif %}
                                                    </td>
                                                    <td>
                                                        <div class=" " role="group"
                                                            aria-label="Basic example">
                                                            <!--<a href="javascript:void(0);" onclick="pull_list_manually('{{lists.seq_id}}','{{lists.id}}')" type="button" class="btn btn-secondary btn-sm">Pull List</a>-->
                                                            <button onclick="show_details('{{lists.id}}')" type="button" class="btn btn-info btn-sm "
                                                                data-toggle="tooltip" data-placement="top" title=""
                                                                data-original-title="View"><i
                                                                    class="mdi mdi-eye "></i></button>
                                                            <a href="{% url 'update_list' lists.id %}" type="button" class="btn btn-primary btn-sm" data-toggle="tooltip"
                                                            data-placement="top" title="" data-original-title="Edit"><i
                                                                class="mdi mdi-grease-pencil"></i></a>
                                                            <button type="button" list-id="{{ lists.id }}" class="btn btn-danger btn-sm list-delete"><i
                                                                    class="mdi mdi-trash-can-outline"></i></button>

                                                        </div>
                                                    </td>
                                                </tr>
                                           {% endfor %}

                                        


                                        </tbody>
                                    </table>


                                    <div class="modal" id="viewModal">
                                        <div class="modal-dialog modal-dialog-scrollable">
                                          <div class="modal-content">

                                            <!-- Modal Header -->
                                            <div class="modal-header">
                                              <h2 class="modal-title" id="heading_id"></h2>
                                            </div>

                                            <!-- Modal body -->
                                            <div class="modal-body">

                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label>Name</label>
                                                        <div>
                                                            <input readonly class="form-control" id="title" name="title" >
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                    <label>Created By</label>
                                                    <div>
                                                        <input readonly class="form-control" type="text" id="created_by" name="created_by" >
                                                    </div>
                                                    </div>
                                                </div>

                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label>Status</label>
                                                        <div>
                                                            <input readonly class="form-control" type="text" id="plan" name="plan">
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label>Data Import?</label>
                                                        <div>
                                                            <input readonly class="form-control" id="hash_off" name="hash_off" type="text">
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label>Update Option</label>
                                                        <div>
                                                            <input id="temperature" name="temperature" readonly class="form-control" type="text">
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label>List Pull Everyday</label>
                                                        <textarea readonly id="distribution_status" class="form-control" name="distribution_status"></textarea>
                                                    </div>
                                                </div>

                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label>List Pulled?</label>
                                                        <div>
                                                            <input id="approval" name="approval" readonly class="form-control" type="text">
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label>Created At</label>
                                                        <div>
                                                            <input id="scheduled_plan_for" name="scheduled_plan_for" readonly class="form-control" type="text">
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>

                                            <!-- Modal footer -->
                                            <div class="modal-footer">
                                              <button type="button" class="btn btn-outline-dark waves-effect waves-light" data-dismiss="modal">Close</button>
                                            </div>

                                          </div>
                                        </div>
                                      </div>

                                        <div class="modal fade" id="deleteListModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                Confirm!
                                            </div>
                                            <div class="modal-body">
                                                Do you really want to delete this List?
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-outline-dark waves-effect waves-light"
                                                    data-dismiss="modal">No</button>
                                                <a id="delete-list" class="btn btn-outline-danger waves-effect waves-light btn-ok">Yes</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                </div>

                            </div>

                        </div>
                    </div>
                    <!-- Manage Tags tab starts-->
                    <div class="tab-pane" id="manage-tags" role="tabpanel">
                        <div class="card">
                            <div class="card-body">
                                <div class="row align-items-center">
                                    <div class="col-sm-12">
                                        <button
                                            class="btn btn-primary btn-sm waves-effect waves-light float-right mb-2 "
                                            type="button">
                                            <i class="mdi mdi-plus"></i> Add New Tag
                                        </button>
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered dt-responsive nowrap">
                                                <thead>
                                                    <tr>
                                                        <th>Name</th>
                                                        <th>Description </th>
                                                        <th>Status</th>
                                                        <th>Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>My New Tag </td>
                                                        <td>This is dummy description</td>
                                                        <td>
                                                            Active
                                                        </td>
                                                        <td>
                                                            <div class="btn-group btn-group-sm" role="group"
                                                                aria-label="Basic example">
                                                                <button type="button" class="btn btn-primary mr-1"
                                                                    data-toggle="tooltip" data-placement="top" title=""
                                                                    data-original-title="Edit"><i
                                                                        class="mdi mdi-grease-pencil "></i></button>
                                                                <button type="button" class="btn btn-danger mr-1"><i
                                                                        class="mdi mdi-trash-can-outline"></i></button>
                                                            </div>
                                                        </td>
                                                    </tr>

                                                </tbody>
                                            </table>

                                        </div>
                                    </div>
                                </div> <!-- end row -->
                                <!-- Add Tags Div Start -->
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label>Name</label>
                                            <div>
                                                <input type="text" class="form-control" required=""
                                                    placeholder="Enter Tag Name" autocomplete="on">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label>Description</label>
                                            <textarea required="" class="form-control" name="description"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label class="control-label">Status</label>
                                            <select class="form-control custom-select">
                                                <option selected disabled>Select Status</option>
                                                <option value="ac">Active</option>
                                                <option value="ia">Inactive</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <button class="btn btn-primary waves-effect waves-light" type="button">
                                            Save
                                        </button>
                                    </div>
                                </div> <!-- end row -->
                                <!-- Add Tags Div End -->
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!-- end col -->

            <!-- Manage Tags Modal Popup -->
            <div id="customModel" class="modal fade bs-example-modal-center-custom" tabindex="-1" role="dialog"
                aria-labelledby="mySmallModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog modal-lg">
                    <div class="modal-content">
                        <form onsubmit="custom_submit()" method="post">{% csrf_token %}
                        <div style="background-color:#d7dae0;" class="modal-header">
                            <h3 class="modal-title mt-0">Custom Fields</h3>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div style="background-color:#f7f8fa;" class="modal-body">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label>Custom Field 1 Label</label>
                                        <div>
                                            <input maxlength="90" value="{{ custom_fields_data.custom1 }}" id="custom1" name="custom1" type="text" class="form-control" required="" placeholder="Custom 1"
                                                autocomplete="on">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label>Custom Field 2 Label</label>
                                        <div>
                                            <input maxlength="90" value="{{ custom_fields_data.custom2 }}" id="custom2" name="custom2" type="text" class="form-control" required="" placeholder="Custom 2"
                                                autocomplete="on">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label>Custom Field 3 Label</label>
                                        <div>
                                            <input maxlength="90" value="{{ custom_fields_data.custom3 }}" id="custom3" name="custom3" type="text" class="form-control" required="" placeholder="Custom 3"
                                                autocomplete="on">
                                            <input hidden value="{{ custom_fields_data.user_id }}" id="user_id" name="user_id" type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label>Custom Field 4 Label</label>
                                        <div>
                                            <input maxlength="90" value="{{ custom_fields_data.custom4 }}" id="custom4" name="custom4" type="text" class="form-control" required="" placeholder="Custom 4"
                                                autocomplete="on">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label>Custom Field 5 Label</label>
                                        <div>
                                            <input maxlength="90" value="{{ custom_fields_data.custom5 }}" id="custom5" name="custom5" type="text" class="form-control" required="" placeholder="Custom 5"
                                                autocomplete="on">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label>Custom Field 6 Label</label>
                                        <div>
                                            <input maxlength="90" value="{{ custom_fields_data.custom6 }}" id="custom6" name="custom6" type="text" class="form-control" required="" placeholder="Custom 6"
                                                autocomplete="on">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label>Custom Field 7 Label</label>
                                        <div>
                                            <input maxlength="90" value="{{ custom_fields_data.custom7 }}" id="custom7" name="custom7" type="text" class="form-control" required="" placeholder="Custom 7"
                                                autocomplete="on">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label>Custom Field 8 Label</label>
                                        <div>
                                            <input maxlength="90" value="{{ custom_fields_data.custom8 }}" id="custom8" name="custom8" type="text" class="form-control" required="" placeholder="Custom 8"
                                                autocomplete="on">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label>Custom Field 9 Label</label>
                                        <div>
                                            <input maxlength="90" value="{{ custom_fields_data.custom9 }}" id="custom9" name="custom9" type="text" class="form-control" required="" placeholder="Custom 9"
                                                autocomplete="on">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label>Custom Field 10 Label</label>
                                        <div>
                                            <input maxlength="90" value="{{ custom_fields_data.custom10 }}" id="custom10" name="custom10" type="text" class="form-control" required="" placeholder="Custom 10"
                                                autocomplete="on">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div><!-- /.modal-content -->
                        <div style="background-color:#d7dae0;" class="modal-footer">
                            <div class="row">
                                <div class="col-sm-12 ">
                                    <button class="btn btn-primary waves-effect waves-light" type="submit">
                                        Save Changes
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                    </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
            </div>


            <div id="exampleModalScrollable" class="modal fade bs-example-modal-center-sequence" tabindex="-1" role="dialog"
                aria-labelledby="mySmallModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title mt-0">Update List Sequence</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label>Pull List Every Day</label>
                                        <div>
                                            <input min="0" max="30" type="number" id="pull_every_day" name="pull_every_day" class="form-control" required="" placeholder="type days count.."
                                                >
                                        </div>
                                        <input id="sequence_id" name="sequence_id" type="hidden" value="">
                                        <input id="hid_list_id" name="hid_list_id" type="hidden" value="">
                                    </div>
                                </div>
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label>List Pulled?</label>
                                        <div id="1" class="col-sm-6">
                                        <div class="form-check-inline">
                                            <div class="custom-control custom-radio">
                                                <input type="radio" id="pulled_list" name="pulled" value="Pulled"
                                                    class="custom-control-input">
                                                <label class="custom-control-label" for="pulled_list">Pulled </label>
                                            </div>
                                        </div>
                                        <div class="form-check-inline">
                                            <div class="custom-control custom-radio">
                                                <input type="radio" id="not_pulled" name="pulled" value="Not Pulled"
                                                    class="custom-control-input">
                                                <label class="custom-control-label" for="not_pulled">Not Pulled</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                    </div>
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label>Choose Date</label>
                                        <div>
                                            <input required class="form-control" type="date" value="{{ today_date }}" id="date" name="date">
                                        </div>
                                    </div>
                                </div>
                                </div>
                        </div><!-- /.modal-content -->
                        <div class="modal-footer">
                            <div class="row">
                                <div class="col-sm-12 ">
                                    <button id="pull_btn_id" onclick="pull_list_manually()" type="button" class="btn btn-outline-secondary waves-effect waves-light">
                                        Pull List
                                    </button>
                                    <button id="update_btn_id" onclick="update_list_sequence()" class="btn btn-primary waves-effect waves-light" type="button">
                                        Create/Update
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
            </div>

        </div>
        <!-- container-fluid -->

    </div>
    </div>
    <!-- content -->

{% block extrajs %}

<script type="text/javascript">
$(document).ready(function() {
    $("#add_list").hide();

    $(document).on('click', '.list-delete', function(){
        selected_list = $(this).attr('list-id');
        url = window.location.origin + '/del_list/' + selected_list;
        $('#delete-list').attr("href", url);

        $('#deleteListModal').modal('show');
    });

});

function add_list_button () {
    $("#add_list").show();
    $("#list_table").hide();
    $("#list__field_btn").hide();
}


function back_btn_click () {
    $("#add_list").hide();
    $("#list_table").show();
    $("#list__field_btn").show();
}


function pull_list_manually (seq_id, list_id) {
    $( "#pull_btn_id" ).prop( "disabled", true );
    var data = {
      seq_id : $('#sequence_id').val(),
      list_id : $('#hid_list_id').val(),
    };

    $.ajax({
         type: "POST",
         url: window.location.origin+"/list_pull",
         data: JSON.stringify(data),
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         success: function (result) {
         if(result.status==200)
         {
            location.reload();
         }
         else
         {
            location.reload();

         }
       }
    });
}

function create_sequence (seq_id, list_id) {
    var data = {
      id : seq_id,
    };

    $.ajax({
         type: "POST",
         url: window.location.origin+"/get_sequence",
         data: JSON.stringify(data),
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         success: function (result) {
         if(result.status==200)
         {
            $("#pull_every_day").val(result.list_sequence_data.pull_every_day);
            if (result.list_sequence_data.pulled_status === 'Pulled') {
                $( "#pulled_list" ).prop( "checked", true );
                $( "#not_pulled" ).prop( "checked", false );
            } else {
                $( "#not_pulled" ).prop( "checked", true );
                $( "#pulled_list" ).prop( "checked", false );
            }
            $('#pulled_list').val("Pulled");
            $('#not_pulled').val("Not Pulled");
            $("#date").val(result.list_sequence_data.pull_date);
            $('#sequence_id').val(seq_id);
            $('#hid_list_id').val(list_id);
            $('#exampleModalScrollable').modal('show');
         }
         else
         {
            var d = new Date();
            var month = d.getMonth()+1;
            var day = d.getDate();
            var output = d.getFullYear() + '-' +
                (month<10 ? '0' : '') + month + '-' +
                (day<10 ? '0' : '') + day;

            $('#hid_list_id').val(list_id);
            $("#pull_every_day").val('0');
            $("#not_pulled").prop( "checked", true );
            $('#pulled_list').val("Pulled");
            $('#not_pulled').val("Not Pulled");
            $("#date").val(output);
            $('#sequence_id').val(seq_id);
            $('#hid_list_id').val(list_id);
            $('#exampleModalScrollable').modal('show');

         }
       }
    });
}


function update_list_sequence () {
    $( "#update_btn_id" ).prop( "disabled", true );
    var data = {
      pull_every_day : $("#pull_every_day").val(),
      pulled : $('input[name ="pulled"]:checked').val(),
      date : $("#date").val(),
      sequence_id : $("#sequence_id").val(),
      list_id : $("#hid_list_id").val(),
    };

    $.ajax({
         type: "POST",
         url: window.location.origin+"/update_or_create_sequence",
         data: JSON.stringify(data),
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         success: function (result) {
         if(result.status==200)
         {
            $('#exampleModalScrollable').modal('hide');
            location.reload();
         }
         else
         {
            alert("There is some error");
            $('#exampleModalScrollable').modal('hide');

         }
       }
    });
}

$('#exampleModalScrollable').on('hidden.bs.modal', function (e) {
  $(this)
    .find("input,textarea,select")
       .val('')
       .end()
    .find("input[type=checkbox], input[type=radio]")
       .prop("checked", "")
       .end();
});


function custom_submit () {
    var data = {
      csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
      custom1 : $("#custom1").val(),
      custom2 : $("#custom2").val(),
      custom3 : $("#custom3").val(),
      custom4 : $("#custom4").val(),
      custom5 : $("#custom5").val(),
      custom6 : $("#custom6").val(),
      custom7 : $("#custom7").val(),
      custom8 : $("#custom8").val(),
      custom9 : $("#custom9").val(),
      custom10 : $("#custom10").val(),
      user_id : $("#user_id").val(),
    };

    $.ajax({
         type: "POST",
         url: window.location.origin+"/custom_update",
         data: JSON.stringify(data),
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         success: function (result) {
            $('#customModel').modal('hide');
         },
         error: function (result)
         {
            $('#customModel').modal('hide');
         }
    });
}

function show_details(id) {
    console.log("id is: ",id)
    var data = {
      id : id,
    };

    $.ajax({
         type: "POST",
         url: window.location.origin+"/view_list",
         data: JSON.stringify(data),
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         success: function (result) {
         if(result.status==200)
         {
            $("#heading_id").text(result.list_data.name)
            $("#title").val(result.list_data.name)
            $("#created_by").val(result.list_data.created_by)
            $("#plan").val(result.list_data.list_status)
            $("#hash_off").val(result.list_data.import_data)
            $("#temperature").val(result.list_data.update_option)
            $("#distribution_status").val(result.list_data.list_pull_everyday)
            $("#approval").val(result.list_data.pulled_status)
            $("#scheduled_plan_for").val(result.list_data.pull_date)
            $('#viewModal').modal('show');
         }
         else
         {
            alert("There is some error")
            $('#viewModal').modal('show');

         }
       }
    });
}


</script>
{% endblock %}


{% endblock %}